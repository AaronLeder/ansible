---
- name: Gracefully shut down Proxmox VMs
  hosts: localhost
  connection: local
  gather_facts: false

  vars:
    # Proxmox API connection
    proxmox_api_host: "pve1.your.lab"          # or IP, e.g. 192.168.30.10
    proxmox_api_user: "root@pam"
    proxmox_api_token_id: "ansible"
    proxmox_api_token_secret: "{{ lookup('env', 'PROXMOX_API_TOKEN_SECRET') }}"

    # Which VMs to shut down (override default [])
    proxmox_vms:
      - 100
      - 101
      - 102

  roles:
    - proxmox_shutdown
